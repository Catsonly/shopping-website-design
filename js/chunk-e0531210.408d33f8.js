(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0531210"],{"0ad8":function(t,e,r){"use strict";var n=r("2026"),s=r.n(n);s.a},"1dde":function(t,e,r){var n=r("d039"),s=r("b622"),o=r("2d00"),a=s("species");t.exports=function(t){return o>=51||!n((function(){var e=[],r=e.constructor={};return r[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2026:function(t,e,r){},2166:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return c}));var n=r("bc3a"),s=r.n(n),o=(r("4328"),"http://localhost:3000/users/");function a(t){return s.a.post(o+"addCart",t)}function i(t){return s.a.post(o+"getShopCart",t)}function c(t){return s.a.post(o+"deleteCart",t)}},3146:function(t,e,r){"use strict";var n=r("f131"),s=r.n(n);s.a},"3d01":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-row",{staticClass:"header"},[n("el-col",{staticStyle:{height:"50px"},attrs:{span:16}},[n("img",{staticClass:"logo",staticStyle:{cursor:"pointer"},attrs:{src:r("cac3"),alt:""},on:{click:t.back}})]),n("el-col",{attrs:{span:4}},[n("i",{staticClass:"el-icon-user"}),t.hasLogin?n("span",[t._v(t._s(t.userInfo.name))]):t._e(),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.hasLogin,expression:"!hasLogin"}],on:{click:function(e){return t.login(1)}}},[t._v("登录")]),t._v("/"),t.hasLogin?t._e():n("span",{on:{click:function(e){return t.login(0)}}},[t._v("注册")]),t.hasLogin?n("span",{on:{click:t.loginout}},[t._v("退出")]):t._e()]),n("el-col",{attrs:{span:2}},[n("i",{staticClass:"el-icon-shopping-cart-full"}),n("span",{on:{click:t.goShopCart}},[t._v("购物车")])]),n("el-col",{attrs:{span:2}},[n("i",{staticClass:"el-icon-goods"}),n("span",{on:{click:t.goMyOrder}},[t._v("订单")])])],1),n("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#333","text-color":"#fff","active-text-color":"#ffd04b"}},t._l(t.navGender,(function(e,r){return n("el-submenu",{key:r,ref:e.id,refInFor:!0,attrs:{index:r.toString()}},[n("template",{slot:"title"},[t._v(t._s(e.name))]),t._l(t.navSeries,(function(e,s){return n("div",{key:s,staticClass:"subTitle"},[n("el-menu-item",{ref:e.id,refInFor:!0,attrs:{index:r+"-"+s},on:{click:function(e){return t.navSelect(r,s)}}},[t._v(t._s(e.name))])],1)}))],2)})),1),n("el-dialog",{staticClass:"dialog",attrs:{title:t.dialogTitle,visible:t.registerVisible,center:"",width:"35%"},on:{"update:visible":function(e){t.registerVisible=e}}},[1===t.dialogStatus?n("el-form",{attrs:{mode:t.loginForm,"label-width":"120px","label-position":"right"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名",maxlength:"30"},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name",e)},expression:"loginForm.name"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码",maxlength:"30"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1)],1):n("el-form",{attrs:{mode:t.registerFrom,"label-width":"120px","label-position":"right"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名",maxlength:"30"},model:{value:t.registerFrom.name,callback:function(e){t.$set(t.registerFrom,"name",e)},expression:"registerFrom.name"}})],1),n("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[n("el-input",{staticClass:"input",attrs:{placeholder:"请输入手机号码",maxlength:"30"},model:{value:t.registerFrom.phone,callback:function(e){t.$set(t.registerFrom,"phone",e)},expression:"registerFrom.phone"}})],1),n("el-form-item",{attrs:{label:"性别",prop:"gender"}},[n("el-radio-group",{model:{value:t.registerFrom.gender,callback:function(e){t.$set(t.registerFrom,"gender",e)},expression:"registerFrom.gender"}},[n("el-radio",{attrs:{label:"0"}},[t._v("女")]),n("el-radio",{attrs:{label:"1"}},[t._v("男")])],1)],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码",maxlength:"30"},model:{value:t.registerFrom.password,callback:function(e){t.$set(t.registerFrom,"password",e)},expression:"registerFrom.password"}})],1),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{staticClass:"input",attrs:{placeholder:"请输入邮箱",maxlength:"30"},model:{value:t.registerFrom.email,callback:function(e){t.$set(t.registerFrom,"email",e)},expression:"registerFrom.email"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.registerVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("确 定")])],1)],1)],1)},s=[],o=(r("b0c0"),r("498a"),r("c40e")),a=r("c24f"),i=r("0e0b"),c=r.n(i),l={name:"navBar",data:function(){return{navGender:[],navSeries:[],banner:[],dialogStatus:1,dialogTitle:"登录",registerVisible:!1,registerFrom:{name:"",phone:"",gender:"0",password:"",email:""},loginForm:{name:"",password:""},hasLogin:!1,userInfo:{},hotGoods:[],newGoods:[]}},created:function(){this.getCategoryGender_(),this.getCategorySeries_(),localStorage.getItem("userInfo")&&(this.hasLogin=!0,this.userInfo=JSON.parse(localStorage.getItem("userInfo")))},methods:{goShopCart:function(){this.userInfo.id?this.$router.push("/shoppingCart"):this.$message.info("请先登录")},goMyOrder:function(){this.userInfo.id?this.$router.push("/myOrder"):this.$message.info("请先登录")},back:function(){this.$router.push("/")},navSelect:function(t,e){"/goodsList"==this.$route.path?this.$emit("changeList",{gid:this.navGender[t].gid,sid:this.navSeries[e].sid}):this.$router.push({path:"/goodsList",query:{gid:this.navGender[t].gid,sid:this.navSeries[e].sid}})},getCategoryGender_:function(){var t=this;Object(o["b"])().then((function(e){t.navGender=e.data.data}))},getCategorySeries_:function(){var t=this;Object(o["c"])().then((function(e){t.navSeries=e.data.data}))},goUser:function(){this.$router.push("/user")},login:function(t){this.dialogTitle=0==t?"注册":"登录",this.dialogStatus=t,this.registerVisible=!0},dialogConfirm:function(){var t=this;if(0==this.dialogStatus){for(var e in this.registerFrom)if(""==c.a.trim(this.registerFrom[e]))return void this.$message.error("请检查输入是否完整");if(!c.a.isTel(this.registerFrom.phone))return void this.$message.error("请输出正确手机号");if(!c.a.isEmail(this.registerFrom.email))return void this.$message.error("请输出正确邮箱");Object(a["b"])(this.registerFrom).then((function(e){0==e.data.code?(t.$message.success("注册成功, 请登录"),t.registerFrom={name:"",phone:"",gender:"0",password:"",email:""},t.dialogStatus=1):2==e.data.code?t.$confirm("该手机号已被注册, 是否跳转登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.registerFrom={name:"",phone:"",gender:"0",password:"",email:""},t.dialogStatus=1})):t.$message.error(e.data.msg)}))}else{if(""==c.a.trim(this.loginForm.name))return void this.$message.error("请输入用户名");if(""==c.a.trim(this.loginForm.password))return void this.$message.error("请输入密码");Object(a["a"])(this.loginForm).then((function(e){console.log(e),2==e.data.code?t.$confirm("用户不存在, 是否跳转注册?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loginForm={name:"",password:""},t.dialogStatus=0})):0==e.data.code?(t.loginForm={name:"",password:""},t.$message.success("登陆成功"),t.hasLogin=!0,t.userInfo=e.data.data,t.registerVisible=!1,localStorage.setItem("userInfo",JSON.stringify(e.data.data))):t.$message.error(e.data.msg)}))}},loginout:function(){this.hasLogin=!1,this.userInfo={},localStorage.removeItem("userInfo"),this.$router.push("/")}}},u=l,d=(r("0ad8"),r("2877")),f=Object(d["a"])(u,n,s,!1,null,"0912a901",null);e["a"]=f.exports},"498a":function(t,e,r){"use strict";var n=r("23e7"),s=r("58a8").trim,o=r("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return s(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),s=r("5899"),o="["+s+"]",a=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(a,"")),2&t&&(r=r.replace(i,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"65f0":function(t,e,r){var n=r("861d"),s=r("e8b5"),o=r("b622"),a=o("species");t.exports=function(t,e){var r;return s(t)&&(r=t.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?n(r)&&(r=r[a],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},a15b:function(t,e,r){"use strict";var n=r("23e7"),s=r("44ad"),o=r("fc6a"),a=r("a640"),i=[].join,c=s!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,r){var n=r("83ab"),s=r("d039"),o=r("5135"),a=Object.defineProperty,i={},c=function(t){throw t};t.exports=function(t,e){if(o(i,t))return i[t];e||(e={});var r=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:c,d=o(e,1)?e[1]:void 0;return i[t]=!!r&&!s((function(){if(l&&!n)return!0;var t={length:-1};l?a(t,1,{enumerable:!0,get:c}):t[1]=1,r.call(t,u,d)}))}},b0c0:function(t,e,r){var n=r("83ab"),s=r("9bf2").f,o=Function.prototype,a=o.toString,i=/^\s*function ([^ (]*)/,c="name";n&&!(c in o)&&s(o,c,{configurable:!0,get:function(){try{return a.call(this).match(i)[1]}catch(t){return""}}})},b727:function(t,e,r){var n=r("0366"),s=r("44ad"),o=r("7b0b"),a=r("50c4"),i=r("65f0"),c=[].push,l=function(t){var e=1==t,r=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d;return function(p,m,g,h){for(var v,b,_=o(p),C=s(_),x=n(m,g,3),y=a(C.length),S=0,$=h||i,F=e?$(p,y):r?$(p,0):void 0;y>S;S++)if((f||S in C)&&(v=C[S],b=x(v,S,_),t))if(e)F[S]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return S;case 2:c.call(F,v)}else if(u)return!1;return d?-1:l||u?u:F}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c24f:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return l}));var n=r("bc3a"),s=r.n(n),o=(r("4328"),"http://localhost:3000/users/");function a(t){return s.a.post(o+"register",t)}function i(t){return s.a.post(o+"login",t)}function c(t){return s.a.post(o+"updateUser",t)}function l(t){return s.a.post(o+"resetPwd",t)}},c8d2:function(t,e,r){var n=r("d039"),s=r("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||o[t]()!=o||s[t].name!==t}))}},cd84:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("navBar"),r("div",{staticClass:"content"},[r("el-card",{staticClass:"box-card"},[r("div",[r("p",[t._v("收件人： "),t.hasInfo?r("span",[t._v(t._s(t.orderUser.name))]):r("el-input",{attrs:{placeholder:"请输入收件人"},model:{value:t.orderUser.name,callback:function(e){t.$set(t.orderUser,"name",e)},expression:"orderUser.name"}})],1),r("p",[t._v("电话： "),t.hasInfo?r("span",[t._v(t._s(t.orderUser.phone))]):r("el-input",{attrs:{placeholder:"请输入电话"},model:{value:t.orderUser.phone,callback:function(e){t.$set(t.orderUser,"phone",e)},expression:"orderUser.phone"}})],1),r("p",[t._v("详细地址： "),t.hasInfo?r("span",[t._v(t._s(t.orderUser.address))]):r("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.orderUser.address,callback:function(e){t.$set(t.orderUser,"address",e)},expression:"orderUser.address"}})],1),r("el-button",{attrs:{type:"primary"},on:{click:t.btnClick}},[t._v(t._s(t.btnName))])],1)]),t._l(t.cartList,(function(e){return r("div",{key:e.id,staticClass:"item"},[r("el-col",{staticClass:"left",attrs:{span:6}},[r("el-image",{attrs:{src:e.goods_img,fit:"fit"}})],1),r("el-col",{staticClass:"middle",attrs:{span:14}},[r("p",{staticClass:"title"},[t._v(t._s(e.goods_title))]),r("span",{staticClass:"price"},[t._v(t._s(e.num)+"件 / ￥"+t._s(e.price))])])],1)})),r("div",{staticClass:"total"},[r("el-button",{attrs:{type:"primary"}},[t._v("共"+t._s(t.total)+"件")]),r("el-button",{attrs:{type:"danger"},on:{click:t.buy_}},[t._v("确认订单")])],1)],2)],1)},s=[],o=(r("a15b"),r("d81d"),r("b0c0"),r("3d01")),a=r("2166"),i=r("f8b7"),c={components:{navBar:o["a"]},data:function(){return{orderUser:{name:"",address:"",phone:""},origin:"",cartList:[],total:"",hasInfo:!1,btnName:"确定"}},created:function(){this.origin=this.$route.query.origin,JSON.parse(localStorage.getItem("userInfo"))?"cart"==this.$route.query.origin&&this.getCart_():this.$message.info("请先登录")},methods:{getCart_:function(){var t=this;Object(a["c"])({uid:JSON.parse(localStorage.getItem("userInfo")).id}).then((function(e){t.cartList=e.data.data,t.total=t.cartList.length}))},buy_:function(){var t=this,e={};e.uid=JSON.parse(localStorage.getItem("userInfo")).id,e.num=this.total,e.address=this.orderUser.address,e.phone=this.orderUser.phone,e.order_name=this.orderUser.name,e.goods=this.cartList.map((function(t){return t.gid})).join(","),Object(i["a"])(e).then((function(e){0==e.data.code?(t.$message.success("下单成功"),t.$router.push("/")):t.$message.error(e.data.msg)}))},btnClick:function(){if("确定"==this.btnName)for(var t in this.orderUser)if(""==this.orderUser[t])return void this.$message.info("请输入完整");1==this.hasInfo?this.hasInfo=!1:this.hasInfo=!0,"编辑"==this.btnName?this.btnName="确定":this.btnName="编辑"}}},l=c,u=(r("3146"),r("2877")),d=Object(u["a"])(l,n,s,!1,null,"da14f34c",null);e["default"]=d.exports},d81d:function(t,e,r){"use strict";var n=r("23e7"),s=r("b727").map,o=r("1dde"),a=r("ae40"),i=o("map"),c=a("map");n({target:"Array",proto:!0,forced:!i||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,r){var n=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},f131:function(t,e,r){},f8b7:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i}));var n=r("bc3a"),s=r.n(n),o="http://localhost:3000/users/";function a(t){return s.a.post(o+"buy",t)}function i(t){return s.a.post(o+"getOrder",t)}}}]);
//# sourceMappingURL=chunk-e0531210.408d33f8.js.map