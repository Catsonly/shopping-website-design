(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bb28e5e"],{"0ad8":function(e,t,s){"use strict";var r=s("2026"),i=s.n(r);i.a},2026:function(e,t,s){},"25f0":function(e,t,s){"use strict";var r=s("6eeb"),i=s("825a"),a=s("d039"),n=s("ad6d"),o="toString",l=RegExp.prototype,c=l[o],u=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&r(RegExp.prototype,o,(function(){var e=i(this),t=String(e.source),s=e.flags,r=String(void 0===s&&e instanceof RegExp&&!("flags"in l)?n.call(e):s);return"/"+t+"/"+r}),{unsafe:!0})},"3d01":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-row",{staticClass:"header"},[r("el-col",{staticStyle:{height:"50px"},attrs:{span:16}},[r("img",{staticClass:"logo",staticStyle:{cursor:"pointer"},attrs:{src:s("cac3"),alt:""},on:{click:e.back}})]),r("el-col",{attrs:{span:4}},[r("i",{staticClass:"el-icon-user"}),e.hasLogin?r("span",[e._v(e._s(e.userInfo.name))]):e._e(),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.hasLogin,expression:"!hasLogin"}],on:{click:function(t){return e.login(1)}}},[e._v("登录")]),e._v("/"),e.hasLogin?e._e():r("span",{on:{click:function(t){return e.login(0)}}},[e._v("注册")]),e.hasLogin?r("span",{on:{click:e.loginout}},[e._v("退出")]):e._e()]),r("el-col",{attrs:{span:2}},[r("i",{staticClass:"el-icon-shopping-cart-full"}),r("span",{on:{click:e.goShopCart}},[e._v("购物车")])]),r("el-col",{attrs:{span:2}},[r("i",{staticClass:"el-icon-goods"}),r("span",{on:{click:e.goMyOrder}},[e._v("订单")])])],1),r("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#333","text-color":"#fff","active-text-color":"#ffd04b"}},e._l(e.navGender,(function(t,s){return r("el-submenu",{key:s,ref:t.id,refInFor:!0,attrs:{index:s.toString()}},[r("template",{slot:"title"},[e._v(e._s(t.name))]),e._l(e.navSeries,(function(t,i){return r("div",{key:i,staticClass:"subTitle"},[r("el-menu-item",{ref:t.id,refInFor:!0,attrs:{index:s+"-"+i},on:{click:function(t){return e.navSelect(s,i)}}},[e._v(e._s(t.name))])],1)}))],2)})),1),r("el-dialog",{staticClass:"dialog",attrs:{title:e.dialogTitle,visible:e.registerVisible,center:"",width:"35%"},on:{"update:visible":function(t){e.registerVisible=t}}},[1===e.dialogStatus?r("el-form",{attrs:{mode:e.loginForm,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名",maxlength:"30"},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name",t)},expression:"loginForm.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码",maxlength:"30"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1):r("el-form",{attrs:{mode:e.registerFrom,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名",maxlength:"30"},model:{value:e.registerFrom.name,callback:function(t){e.$set(e.registerFrom,"name",t)},expression:"registerFrom.name"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{staticClass:"input",attrs:{placeholder:"请输入手机号码",maxlength:"30"},model:{value:e.registerFrom.phone,callback:function(t){e.$set(e.registerFrom,"phone",t)},expression:"registerFrom.phone"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{model:{value:e.registerFrom.gender,callback:function(t){e.$set(e.registerFrom,"gender",t)},expression:"registerFrom.gender"}},[r("el-radio",{attrs:{label:"0"}},[e._v("女")]),r("el-radio",{attrs:{label:"1"}},[e._v("男")])],1)],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码",maxlength:"30"},model:{value:e.registerFrom.password,callback:function(t){e.$set(e.registerFrom,"password",t)},expression:"registerFrom.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{staticClass:"input",attrs:{placeholder:"请输入邮箱",maxlength:"30"},model:{value:e.registerFrom.email,callback:function(t){e.$set(e.registerFrom,"email",t)},expression:"registerFrom.email"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.registerVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm}},[e._v("确 定")])],1)],1)],1)},i=[],a=(s("b0c0"),s("498a"),s("c40e")),n=s("c24f"),o=s("0e0b"),l=s.n(o),c={name:"navBar",data:function(){return{navGender:[],navSeries:[],banner:[],dialogStatus:1,dialogTitle:"登录",registerVisible:!1,registerFrom:{name:"",phone:"",gender:"0",password:"",email:""},loginForm:{name:"",password:""},hasLogin:!1,userInfo:{},hotGoods:[],newGoods:[]}},created:function(){this.getCategoryGender_(),this.getCategorySeries_(),localStorage.getItem("userInfo")&&(this.hasLogin=!0,this.userInfo=JSON.parse(localStorage.getItem("userInfo")))},methods:{goShopCart:function(){this.userInfo.id?this.$router.push("/shoppingCart"):this.$message.info("请先登录")},goMyOrder:function(){this.userInfo.id?this.$router.push("/myOrder"):this.$message.info("请先登录")},back:function(){this.$router.push("/")},navSelect:function(e,t){"/goodsList"==this.$route.path?this.$emit("changeList",{gid:this.navGender[e].gid,sid:this.navSeries[t].sid}):this.$router.push({path:"/goodsList",query:{gid:this.navGender[e].gid,sid:this.navSeries[t].sid}})},getCategoryGender_:function(){var e=this;Object(a["b"])().then((function(t){e.navGender=t.data.data}))},getCategorySeries_:function(){var e=this;Object(a["c"])().then((function(t){e.navSeries=t.data.data}))},goUser:function(){this.$router.push("/user")},login:function(e){this.dialogTitle=0==e?"注册":"登录",this.dialogStatus=e,this.registerVisible=!0},dialogConfirm:function(){var e=this;if(0==this.dialogStatus){for(var t in this.registerFrom)if(""==l.a.trim(this.registerFrom[t]))return void this.$message.error("请检查输入是否完整");if(!l.a.isTel(this.registerFrom.phone))return void this.$message.error("请输出正确手机号");if(!l.a.isEmail(this.registerFrom.email))return void this.$message.error("请输出正确邮箱");Object(n["b"])(this.registerFrom).then((function(t){0==t.data.code?(e.$message.success("注册成功, 请登录"),e.registerFrom={name:"",phone:"",gender:"0",password:"",email:""},e.dialogStatus=1):2==t.data.code?e.$confirm("该手机号已被注册, 是否跳转登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.registerFrom={name:"",phone:"",gender:"0",password:"",email:""},e.dialogStatus=1})):e.$message.error(t.data.msg)}))}else{if(""==l.a.trim(this.loginForm.name))return void this.$message.error("请输入用户名");if(""==l.a.trim(this.loginForm.password))return void this.$message.error("请输入密码");Object(n["a"])(this.loginForm).then((function(t){console.log(t),2==t.data.code?e.$confirm("用户不存在, 是否跳转注册?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loginForm={name:"",password:""},e.dialogStatus=0})):0==t.data.code?(e.loginForm={name:"",password:""},e.$message.success("登陆成功"),e.hasLogin=!0,e.userInfo=t.data.data,e.registerVisible=!1,localStorage.setItem("userInfo",JSON.stringify(t.data.data))):e.$message.error(t.data.msg)}))}},loginout:function(){this.hasLogin=!1,this.userInfo={},localStorage.removeItem("userInfo"),this.$router.push("/")}}},u=c,d=(s("0ad8"),s("2877")),m=Object(d["a"])(u,r,i,!1,null,"0912a901",null);t["a"]=m.exports},"498a":function(e,t,s){"use strict";var r=s("23e7"),i=s("58a8").trim,a=s("c8d2");r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return i(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var r=s("1d80"),i=s("5899"),a="["+i+"]",n=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),l=function(e){return function(t){var s=String(r(t));return 1&e&&(s=s.replace(n,"")),2&e&&(s=s.replace(o,"")),s}};e.exports={start:l(1),end:l(2),trim:l(3)}},a547:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("navBar"),s("div",{staticClass:"content"},[s("div",{staticClass:"item info"},[s("h2",{staticClass:"title"},[e._v("个人信息 "),s("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v(e._s(e.editName))])],1),s("div",{staticClass:"detail"},[s("p",{staticClass:"name"},[e._v("用户名:"),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.ifEdit,expression:"!ifEdit"}]},[e._v(e._s(e.userInfo.name))]),s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.ifEdit,expression:"ifEdit"}],attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),s("p",{staticClass:"name"},[e._v("邮箱:"),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.ifEdit,expression:"!ifEdit"}]},[e._v(e._s(e.userInfo.email))]),s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.ifEdit,expression:"ifEdit"}],attrs:{type:"text",placeholder:"请输入邮箱"},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),s("p",{staticClass:"name"},[e._v("性别:"),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.ifEdit,expression:"!ifEdit"}]},[e._v(e._s(e.gender))]),s("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.ifEdit,expression:"ifEdit"}],model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[s("el-radio",{attrs:{label:"0"}},[e._v("女")]),s("el-radio",{attrs:{label:"1"}},[e._v("男")])],1)],1),s("p",{staticClass:"name"},[e._v("电话号码:"),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.ifEdit,expression:"!ifEdit"}]},[e._v(e._s(e.userInfo.phone))]),s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.ifEdit,expression:"ifEdit"}],attrs:{type:"text",placeholder:"请输入手机号码"},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1)])]),s("hr"),s("div",{staticClass:"item pwd"},[s("h2",{staticClass:"title"},[e._v("更改密码")]),s("p",[e._v("请输入原密码:"),s("el-input",{attrs:{type:"password",placeholder:"请输入原密码"},model:{value:e.pwd.old,callback:function(t){e.$set(e.pwd,"old",t)},expression:"pwd.old"}})],1),s("p",[e._v("请输入新密码: "),s("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.pwd.new,callback:function(t){e.$set(e.pwd,"new",t)},expression:"pwd.new"}})],1),s("el-button",{attrs:{type:"primary"},on:{click:e.resetPwd_}},[e._v("确 认")])],1)])],1)},i=[],a=(s("d3b7"),s("25f0"),s("498a"),s("c24f")),n=s("3d01"),o=s("0e0b"),l=s.n(o),c={name:"user",components:{navBar:n["a"]},data:function(){return{userInfo:{},ifEdit:!1,editName:"编辑",gender:"",pwd:{old:"",new:""}}},created:function(){localStorage.getItem("userInfo")&&(this.userInfo=JSON.parse(localStorage.getItem("userInfo")),"0"==this.userInfo.gender?this.gender="女":this.gender="男")},methods:{edit:function(){var e=this;if(this.ifEdit){for(var t in this.userInfo)if(""==l.a.trim(this.userInfo[t].toString()))return void this.$message.error("请检查输入是否完整");if(!l.a.isTel(this.userInfo.phone))return void this.$message.error("请输出正确手机号");if(!l.a.isEmail(this.userInfo.email))return void this.$message.error("请输出正确邮箱");Object(a["d"])(this.userInfo).then((function(t){0==t.data.code?(e.$message.success("更新成功"),e.ifEdit=!1,e.editName="编辑",localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),"0"==e.userInfo.gender?e.gender="女":e.gender="男"):e.$message.error("更新失败"+t.data.msg)}))}else this.ifEdit=!0,this.editName="保存"},resetPwd_:function(){var e=this;for(var t in this.pwd)if(""==l.a.trim(this.pwd[t]))return void this.$message.error("请输入完整");var s={id:this.userInfo.id,oldpwd:this.pwd.old,newpwd:this.pwd.new};Object(a["c"])(s).then((function(t){0==t.data.code?(e.$message.success("修改成功,,请重新登陆"),localStorage.removeItem("userInfo"),e.$router.push("/")):e.$message.error(t.data.msg)}))}}},u=c,d=(s("d6c4"),s("2877")),m=Object(d["a"])(u,r,i,!1,null,"1f553760",null);t["default"]=m.exports},b0c0:function(e,t,s){var r=s("83ab"),i=s("9bf2").f,a=Function.prototype,n=a.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in a)&&i(a,l,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(e){return""}}})},c24f:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return c}));var r=s("bc3a"),i=s.n(r),a=(s("4328"),"http://localhost:3000/users/");function n(e){return i.a.post(a+"register",e)}function o(e){return i.a.post(a+"login",e)}function l(e){return i.a.post(a+"updateUser",e)}function c(e){return i.a.post(a+"resetPwd",e)}},c8d2:function(e,t,s){var r=s("d039"),i=s("5899"),a="​᠎";e.exports=function(e){return r((function(){return!!i[e]()||a[e]()!=a||i[e].name!==e}))}},d6c4:function(e,t,s){"use strict";var r=s("f0c9"),i=s.n(r);i.a},f0c9:function(e,t,s){}}]);
//# sourceMappingURL=chunk-0bb28e5e.6d49b370.js.map